---
layout: post
title: 图片模糊效果 · Blur Image
tags: iOS
categories: Dev
cover: /images/blur_image/blur_image.jpg
---

There are two ways to make the blur effect on a image.

1 . Using blur fileter of `CoreImage`

2 . Creating a blurring overlay view using `UIBlurEffect`

两种做图片模糊效果的方法

1 . 使用 `CoreImage` 的模糊滤镜

2 . 使用 `UIBlurEffect` 给图片增加一个模糊效果蒙版。

---

{% highlight swift %}
// CoreImage

import CoreImage

var context = CIContext(options: nil)

func blurEffect() {
    //blur image
    let currentFilter = CIFilter(name: "CIGaussianBlur") 
    let beginImage = CIImage(image: bg.image!)
    currentFilter!.setValue(beginImage, forKey: kCIInputImageKey)
    currentFilter!.setValue(10, forKey: kCIInputRadiusKey)
    //crop image
    let cropFilter = CIFilter(name: "CICrop")
    cropFilter!.setValue(currentFilter!.outputImage, forKey: kCIInputImageKey)
    cropFilter!.setValue(CIVector(cgRect: beginImage!.extent), forKey: "inputRectangle")
    //output
    let output = cropFilter!.outputImage 
    let cgimg = context.createCGImage(output!, from: output!.extent)
    let processedImage = UIImage(cgImage: cgimg!)
    bg.image = processedImage 
}
{% endhighlight %}


{% highlight swift %}
//UIBlurEffect

func addBlur(_ alpha: CGFloat = 0.5) {
    // create effect
    let effect = UIBlurEffect(style: .dark)
    let effectView = UIVisualEffectView(effect: effect)
    // set boundry and alpha
    effectView.frame = self.bounds
    effectView.autoresizingMask = [.flexibleWidth, .flexibleHeight]
    effectView.alpha = alpha
    self.addSubview(effectView)
}
{% endhighlight %}