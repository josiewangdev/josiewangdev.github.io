---
layout: post
title: 类名与类的转换 · Transform between class name and class
tags: iOS
categories: Dev
---

#### Get class from class name string ####

We can use `NSClassFromString` to get the instance of a class from class name by using

#### 从类名获取类 ####

我们可以用 `NSClassFromString` 从类名来获取到一个该类的实例。

---

{% highlight swift %}
let model = NSClassFromString("bundleName.className") as! NSObject.Type;
let enity = model.init();
{% endhighlight %}

----

But in Swift, the `className` needs to be appended by app's name as prefix, usually app name looks like this: **myAppName_switch**, so we need to change code like this

但是在Swift中，`className`是由类名再加上项目应用名称作为前缀组成, 并且swift中的应用命名方式是这样的：**myAppName_switch**, 所以我们需要将代码改为

---

{% highlight swift %}
if let appName: String = NSBundle.mainBundle().objectForInfoDictionaryKey("CFBundleName") as! String? {

    //get the appName
    let indexStart = appName.startIndex.advancedBy(10)
    let indexEnd = appName.endIndex.advancedBy(-6)
    let subStr = appName.substringToIndex(indexStart)
    let subStr2 = appName.substringFromIndex(indexEnd)
    let endName = "\(subStr)_\(subStr2)"

    //get the className string as appName + className
    let classStringName = "\(endName).\(className)"

    //get the instance
    let model = NSClassFromString(classStringName)
    let entity = myClass.init()

}
{% endhighlight %}

---

或者可以这样说， NSClassFromString 在Swift中的参数不只是一个单独的类字符串,而是一个完整的包名加类名组成的字符串,也就是包类名字符串.

如下：

{% highlight swift %}
let model = NSClassFromString("包名.类名") as! NSObject.Type;
let enity = model.init();
{% endhighlight %}

---

#### Get class name string from class ####

#### 从类获取类名 ####

---

{% highlight swift %}
//from a class
String(describing: YourClass.self)
//from a type
String(describing: self)
{% endhighlight %}

{% highlight swift %}
//Example
struct Foo {
    // Instance Level
    var typeName: String {
        return String(describing: Foo.self)
    }
    // Instance Level - Alternative Way
    var otherTypeName: String {
        let thisType = type(of: self)
        return String(describing: thisType)
    }
    // Type Level
    static var typeName: String {
        return String(describing: self)
    }
}

Foo().typeName       // = "Foo"
Foo().otherTypeName  // = "Foo"
Foo.typeName         // = "Foo"
{% endhighlight %}
