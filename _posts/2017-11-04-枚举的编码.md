---
layout: post
title: 枚举的编码 · Encode enum type
tags: Swift
categories: Dev
---

If we want to make the Enum type encodable, we need to convert the enum to and from the raw value like this.

如果想要编码枚举类型，我们需要将枚举类型的原始值进行转换。

---

{% highlight swift %}

enum Stage: String {
    case DisplayAll = "displayAll"
}

class AppState : NSObject, NSCoding {
    var idx   = 0
    var stage = Stage.DisplayAll

    override init() {}

    required init(coder aDecoder: NSCoder) {
        self.idx = aDecoder.decodeIntegerForKey("idx")
        self.stage = Stage(rawValue: (aDecoder.decodeObjectForKey("stage") as! String)) ?? .DisplayAll
    }

    func encodeWithCoder(aCoder: NSCoder) {
        aCoder.encodeInteger(self.idx, forKey: "idx")
        aCoder.encodeObject(self.stage.rawValue, forKey:"stage")
    }
}
{% endhighlight %}
